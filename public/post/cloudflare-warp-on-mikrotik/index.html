<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setup Cloudflare Warp on Mikrotik | Just /var/log/</title>
<meta name=keywords content="Mikrotik,Networking"><meta name=description content='Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik

Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.
Buat akun Warp

Untuk membuat akun disini saya akan pakai tools ini https://github.com/ViRb3/wgcf (Silahkan dibaca sendiri tutorialnya:v)
Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi
➜  Network cat wgcf-profile.conf 
[Interface]
PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U=
Address = 172.16.0.2/32
Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128
DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001
MTU = 1280
[Peer]
PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo=
AllowedIPs = 0.0.0.0/0
AllowedIPs = ::/0
Endpoint = engage.cloudflareclient.com:2408
➜  Network 


Setup Mikrotik

Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU & Private key)

Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile

Buat address baru dengan IP 172.16.0.2/32 dan Interface WARP

Ubah DNS ke 1.1.1.1
Buat Routing Table baru dengan nama Cloudflare
Tambahkan Route baru dengan gateway WARP

Buat NAT baru dengan Out Interface WARP dan action masquerade (Pastikan nat ini berada paling atas)

 /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix="" out-interface=WARP

Tambahkan mange baru

/ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix="" new-routing-mark=Cloudflare  passthrough=no src-address=192.168.xx.xx-192.168.xx.xx
Testing
Sebelum Routing
Terlihat traffic masih mengarah ke ISP
'><meta name=author content="Bembenk"><link rel=canonical href=https://bembenk18.github.io/post/cloudflare-warp-on-mikrotik/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://bembenk18.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bembenk18.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bembenk18.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://bembenk18.github.io/apple-touch-icon.png><link rel=mask-icon href=https://bembenk18.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://bembenk18.github.io/post/cloudflare-warp-on-mikrotik/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-438PNW325R"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-438PNW325R")}</script><meta property="og:url" content="https://bembenk18.github.io/post/cloudflare-warp-on-mikrotik/"><meta property="og:site_name" content="Just /var/log/"><meta property="og:title" content="Setup Cloudflare Warp on Mikrotik"><meta property="og:description" content='Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.
Buat akun Warp Untuk membuat akun disini saya akan pakai tools ini https://github.com/ViRb3/wgcf (Silahkan dibaca sendiri tutorialnya:v) Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi ➜ Network cat wgcf-profile.conf [Interface] PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U= Address = 172.16.0.2/32 Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128 DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001 MTU = 1280 [Peer] PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo= AllowedIPs = 0.0.0.0/0 AllowedIPs = ::/0 Endpoint = engage.cloudflareclient.com:2408 ➜ Network Setup Mikrotik Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU & Private key) Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile Buat address baru dengan IP 172.16.0.2/32 dan Interface WARP Ubah DNS ke 1.1.1.1 Buat Routing Table baru dengan nama Cloudflare Tambahkan Route baru dengan gateway WARP Buat NAT baru dengan Out Interface WARP dan action masquerade (Pastikan nat ini berada paling atas) /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix="" out-interface=WARP Tambahkan mange baru /ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix="" new-routing-mark=Cloudflare passthrough=no src-address=192.168.xx.xx-192.168.xx.xx Testing Sebelum Routing Terlihat traffic masih mengarah ke ISP '><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-08-25T05:46:19+07:00"><meta property="article:modified_time" content="2024-08-25T05:46:19+07:00"><meta property="article:tag" content="Mikrotik"><meta property="article:tag" content="Networking"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setup Cloudflare Warp on Mikrotik"><meta name=twitter:description content='Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik

Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.
Buat akun Warp

Untuk membuat akun disini saya akan pakai tools ini https://github.com/ViRb3/wgcf (Silahkan dibaca sendiri tutorialnya:v)
Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi
➜  Network cat wgcf-profile.conf 
[Interface]
PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U=
Address = 172.16.0.2/32
Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128
DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001
MTU = 1280
[Peer]
PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo=
AllowedIPs = 0.0.0.0/0
AllowedIPs = ::/0
Endpoint = engage.cloudflareclient.com:2408
➜  Network 


Setup Mikrotik

Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU & Private key)

Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile

Buat address baru dengan IP 172.16.0.2/32 dan Interface WARP

Ubah DNS ke 1.1.1.1
Buat Routing Table baru dengan nama Cloudflare
Tambahkan Route baru dengan gateway WARP

Buat NAT baru dengan Out Interface WARP dan action masquerade (Pastikan nat ini berada paling atas)

 /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix="" out-interface=WARP

Tambahkan mange baru

/ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix="" new-routing-mark=Cloudflare  passthrough=no src-address=192.168.xx.xx-192.168.xx.xx
Testing
Sebelum Routing
Terlihat traffic masih mengarah ke ISP
'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bembenk18.github.io/post/"},{"@type":"ListItem","position":2,"name":"Setup Cloudflare Warp on Mikrotik","item":"https://bembenk18.github.io/post/cloudflare-warp-on-mikrotik/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setup Cloudflare Warp on Mikrotik","name":"Setup Cloudflare Warp on Mikrotik","description":"Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.\nBuat akun Warp Untuk membuat akun disini saya akan pakai tools ini https://github.com/ViRb3/wgcf (Silahkan dibaca sendiri tutorialnya:v) Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi ➜ Network cat wgcf-profile.conf [Interface] PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U= Address = 172.16.0.2/32 Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128 DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001 MTU = 1280 [Peer] PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo= AllowedIPs = 0.0.0.0/0 AllowedIPs = ::/0 Endpoint = engage.cloudflareclient.com:2408 ➜ Network Setup Mikrotik Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU \u0026amp; Private key) Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile Buat address baru dengan IP 172.16.0.2/32 dan Interface WARP Ubah DNS ke 1.1.1.1 Buat Routing Table baru dengan nama Cloudflare Tambahkan Route baru dengan gateway WARP Buat NAT baru dengan Out Interface WARP dan action masquerade (Pastikan nat ini berada paling atas) /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix=\u0026#34;\u0026#34; out-interface=WARP Tambahkan mange baru /ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix=\u0026#34;\u0026#34; new-routing-mark=Cloudflare passthrough=no src-address=192.168.xx.xx-192.168.xx.xx Testing Sebelum Routing Terlihat traffic masih mengarah ke ISP ","keywords":["Mikrotik","Networking"],"articleBody":"Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.\nBuat akun Warp Untuk membuat akun disini saya akan pakai tools ini https://github.com/ViRb3/wgcf (Silahkan dibaca sendiri tutorialnya:v) Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi ➜ Network cat wgcf-profile.conf [Interface] PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U= Address = 172.16.0.2/32 Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128 DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001 MTU = 1280 [Peer] PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo= AllowedIPs = 0.0.0.0/0 AllowedIPs = ::/0 Endpoint = engage.cloudflareclient.com:2408 ➜ Network Setup Mikrotik Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU \u0026 Private key) Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile Buat address baru dengan IP 172.16.0.2/32 dan Interface WARP Ubah DNS ke 1.1.1.1 Buat Routing Table baru dengan nama Cloudflare Tambahkan Route baru dengan gateway WARP Buat NAT baru dengan Out Interface WARP dan action masquerade (Pastikan nat ini berada paling atas) /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix=\"\" out-interface=WARP Tambahkan mange baru /ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix=\"\" new-routing-mark=Cloudflare passthrough=no src-address=192.168.xx.xx-192.168.xx.xx Testing Sebelum Routing Terlihat traffic masih mengarah ke ISP Setelah Routing Terlihat traffic sudah mengarah ke Cloudflare Catatan Ini akan routing semua traffic Untuk apa harus routing dengan VPN? Sesuai arahan pak Anton biar gak bisa di intip oleh ISP dan pemerintah ","wordCount":"238","inLanguage":"en","datePublished":"2024-08-25T05:46:19+07:00","dateModified":"2024-08-25T05:46:19+07:00","author":{"@type":"Person","name":"Bembenk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bembenk18.github.io/post/cloudflare-warp-on-mikrotik/"},"publisher":{"@type":"Organization","name":"Just /var/log/","logo":{"@type":"ImageObject","url":"https://bembenk18.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bembenk18.github.io/ accesskey=h title="Just /var/log/ (Alt + H)">Just /var/log/</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bembenk18.github.io/ title=Home><span>Home</span></a></li><li><a href=https://bembenk18.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://bembenk18.github.io/about title=About><span>About</span></a></li><li><a href=https://bembenk18.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Setup Cloudflare Warp on Mikrotik</h1><div class=post-meta><span title='2024-08-25 05:46:19 +0700 WIB'>2024-08-25</span>&nbsp;·&nbsp;Bembenk</div></header><div class=post-content><p>Sesuai sabda pak Anton Wibowo tentang VPN dibawah ini, maka saya akan coba setup Cloudflare Warp di Mikrotik
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/1.png></p><p>Karena disini kita akan pakai Wireguard maka wajib menggunakan RouterOS versi 7.</p><h1 id=buat-akun-warp>Buat akun Warp<a hidden class=anchor aria-hidden=true href=#buat-akun-warp>#</a></h1><ul><li>Untuk membuat akun disini saya akan pakai tools ini <a href=https://github.com/ViRb3/wgcf>https://github.com/ViRb3/wgcf</a> (Silahkan dibaca sendiri tutorialnya:v)</li><li>Setelah itu kita akan mendapatkan file wgcf-profile.conf yang berisi<pre tabindex=0><code>➜  Network cat wgcf-profile.conf 
[Interface]
PrivateKey = mAmDoyJ8Qf/2sEyuhjhPytLDtx8ioiEaJh3q8K8iE3u2U=
Address = 172.16.0.2/32
Address = 2606:4700:110:84ca:7d82:b1d:7534:56f9/128
DNS = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001
MTU = 1280
[Peer]
PublicKey = bmXOC+F1FxEHF9jjiK2H5/1SUtzH0JuVo51h2wPfgyo=
AllowedIPs = 0.0.0.0/0
AllowedIPs = ::/0
Endpoint = engage.cloudflareclient.com:2408
➜  Network 
</code></pre></li></ul><h1 id=setup-mikrotik>Setup Mikrotik<a hidden class=anchor aria-hidden=true href=#setup-mikrotik>#</a></h1><ul><li>Buat Wireguard baru dan sesuaikan dengan config profile yang sudah kita dapatkan (Edit pada bagian MTU & Private key)
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/2.png></li><li>Buat Wireguard Peer sesuaikan juga Public Key, Endpoint dan Endpoint Port dengan profile
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/3.png></li><li>Buat address baru dengan IP 172.16.0.2/32 dan Interface <strong>WARP</strong>
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/4.png></li><li>Ubah DNS ke 1.1.1.1</li><li>Buat Routing Table baru dengan nama <strong>Cloudflare</strong></li><li>Tambahkan Route baru dengan gateway <strong>WARP</strong>
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/5.png></li><li>Buat NAT baru dengan Out Interface <strong>WARP</strong> dan action masquerade (Pastikan nat ini berada paling atas)</li></ul><pre tabindex=0><code> /ip firewall nat add action=masquerade chain=srcnat disabled=no log=no log-prefix=&#34;&#34; out-interface=WARP
</code></pre><ul><li>Tambahkan mange baru</li></ul><pre tabindex=0><code>/ip firewall mangle set *1 action=mark-routing chain=prerouting disabled=no log=no log-prefix=&#34;&#34; new-routing-mark=Cloudflare  passthrough=no src-address=192.168.xx.xx-192.168.xx.xx
</code></pre><h1 id=testing>Testing<a hidden class=anchor aria-hidden=true href=#testing>#</a></h1><h3 id=sebelum-routing>Sebelum Routing<a hidden class=anchor aria-hidden=true href=#sebelum-routing>#</a></h3><p>Terlihat traffic masih mengarah ke ISP
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/6.png></p><h3 id=setelah-routing>Setelah Routing<a hidden class=anchor aria-hidden=true href=#setelah-routing>#</a></h3><p>Terlihat traffic sudah mengarah ke Cloudflare
<img loading=lazy src=https://raw.githubusercontent.com/bembenk18/Images/main/WARP/7.png></p><h1 id=catatan>Catatan<a hidden class=anchor aria-hidden=true href=#catatan>#</a></h1><ul><li>Ini akan routing semua traffic</li><li>Untuk apa harus routing dengan VPN? Sesuai arahan pak Anton biar gak bisa di intip oleh ISP dan pemerintah</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://bembenk18.github.io/tags/mikrotik/>Mikrotik</a></li><li><a href=https://bembenk18.github.io/tags/networking/>Networking</a></li></ul></footer></article></main><footer class=footer><span>Bembenk</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>